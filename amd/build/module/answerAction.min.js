define ("mod_latex/module/answerAction",["exports","core/templates","./Latex"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.showActions=a.initAction=void 0;b=d(b);c=d(c);function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){var c="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=f(a))||b&&a&&"number"==typeof a.length){if(c)a=c;var d=0,e=function(){};return{s:e,n:function n(){if(d>=a.length)return{done:!0};return{done:!1,value:a[d++]}},e:function e(a){throw a},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var g=!0,h=!1,j;return{s:function s(){c=c.call(a)},n:function n(){var a=c.next();g=a.done;return a},e:function e(a){h=!0;j=a},f:function f(){try{if(!g&&null!=c.return)c.return()}finally{if(h)throw j}}}}function f(a,b){if(!a)return;if("string"==typeof a)return g(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor)c=a.constructor.name;if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return g(a,b)}function g(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++){d[c]=a[c]}return d}var h=!1,i="",j=function(a){l();var b=[];if(!a){i="step-".concat(k());b.push({idLatex:i,stepNumber:k(),formula:""})}else{var c=JSON.parse(a),d=1;for(var f in c){i=f;b.push({idLatex:i,stepNumber:d,formula:c[f]});d++}}o(b).then(function(){var a=e(b),c;try{for(a.s();!(c=a.n()).done;){var d=c.value;p("#".concat(d.idLatex),d.formula);m(d.idLatex)}}catch(b){a.e(b)}finally{a.f()}return null})};a.initAction=j;var k=function(){return document.getElementById("container_steps").children.length+1},l=function(){if(!h){h=!0;document.getElementById("add-step").addEventListener("click",function(a){a.preventDefault();j()})}},m=function(a){var b={};document.getElementById(a).addEventListener("change",function(){var a=document.getElementById("container_steps").getElementsByTagName("input"),c=e(a),d;try{for(c.s();!(d=c.n()).done;){var f=d.value;if(""!==f.value){b[f.id]=f.value}}}catch(a){c.e(a)}finally{c.f()}n().value=JSON.stringify(b)})},n=function(){var a=document.querySelectorAll("[name=\"answeraction\"]");return a[0]},o=function(a){return b.default.render("mod_latex/components/step-answer",{params:a}).then(function(a,c){b.default.appendNodeContents(document.getElementById("container_steps"),a,c)}).fail(function(a){window.console.error(a)})},p=function(a,b,d){new c.default({formulaContainer:a,formula:b,readOnly:d})};a.showActions=function showActions(){var a=document.getElementById("answer-action-container");if(a){var b=a.dataset.answerAction,c=JSON.parse(b);for(var d in c){a.append(q(d));p("#".concat(d,"-submissions"),c[d],!0)}}};var q=function(a){var b=document.createElement("input");b.id="".concat(a,"-submissions");b.classList.add("d-none");return b}});
//# sourceMappingURL=answerAction.min.js.map
